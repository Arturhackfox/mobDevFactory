import UIKit

typealias Emoji = Character
typealias CarModel = (model: String, isAvailable: Bool?, carPrice: Int)

// CarPark
let camry: CarModel = ("Toyota Camry", false, 45)
let passat: CarModel = ("Volkswagen Passat", true, 35)
let prius: CarModel = ("Toyota Prius ", true, 50)
let mustang: CarModel? = ("Ford Mustang", true, 85)

// Countries and travel expenses
let netherlands = createCountryDictionarie(countryName: "Netherlands", ticketsPrice: 250, apartamentsPrice: 50)
let france = createCountryDictionarie(countryName: "France", ticketsPrice: 175, apartamentsPrice: 35)
let newYork = createCountryDictionarie(countryName: "NewYork", ticketsPrice: 333, apartamentsPrice: 450)
let japan = createCountryDictionarie(countryName: "Japan", ticketsPrice: 250, apartamentsPrice: 50)
let northKorea = createCountryDictionarie(countryName: "northKorea", ticketsPrice: 250, apartamentsPrice: 35)

// Countries local vehiecle
let netherlandsCountryCar = camry.isAvailable ?? false ? camry : passat
let franceCountryCar = mustang
let newYorkCountryCar: CarModel? = prius
let japanCountryCar: CarModel? = nil
let northKoreaCountryCar: CarModel? = nil

// Emojies
let croissant: Emoji = "ü•ê"
let excitedMood: Emoji = "ü§†"
let taxi: Emoji = "üöï"
let plane = "‚úàÔ∏è"
var totalTicketsWithEmojie = [String]()

// Other expenses
let croissantPrice = 2
let chocolateBar = 2.50
let cola = 4
let subwayNyc = 10

var tickets = [Int]()
var apartaments = [Int]()
var vehicle = [Int]()
var picturesTaken = [Int]()
var otherExpenses = [Double]()

// Total expanses
var totalTickets = 0
var totalApartaments = 0
var totalVehicleExpanses = 0
var totalPictureTaken = 0
var totalOther: Double = 0
var summary = 0.0

tellStory(country: netherlands) { country in
   """
  –ü—Ä–∏–≤–µ—Ç –¥—Ä—É–∂–∏—â–µ! –°–µ–≥–æ–¥–Ω—è –Ø —Ä–µ—à–∏–ª —É–µ—Ö–∞—Ç—å —Å –ü–æ–ª—å—à–∏ –≤ –¥–æ–ª–≥–æ–∂–¥–∞–Ω–Ω–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ!\(excitedMood)
  –ü–æ —Å–ø–∏—Å–∫—É –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–∞–Ω–æ–π –±—É–¥–µ—Ç - \(country.keys.first ?? "No info")
  –î–∞–≤–∞–π —Å–¥–µ–ª–∞–µ–º —Ñ–æ—Ç–æ –º–æ–∏—Ö —á–µ–º–∞–¥–∞–Ω–æ–≤
  """
}
picturesTaken.append(1)

tellStory(country: netherlands) { country in
    """
    –ø–µ—Ä–µ–ª—ë—Ç –≤ –æ–¥–Ω—É —Å—Ç–æ—Ä–æ–Ω—É –º–Ω–µ –≤—ã–π–¥–µ—Ç \(country["Netherlands"]?["Tickets"] ?? 0)$
    –∫–∞–∫ –∂–µ –Ω–µ —Å–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–∫—É –≤ —Å—Ç–æ—Ä–∏—Å –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ —Ñ–æ–Ω–µ –∞–µ—Ä–æ–ø–æ—Ä—Ç–∞
    –î–∞–ª–µ–µ –Ø —É–∂–µ –∑–∞—é—Ä–æ–Ω–∏—Ä–æ–≤–∞–ª –æ—Ç–ª–∏—á–Ω—É—é –∏ —É—é–Ω—É—é—Ç –∫–≤–∞—Ä—Ç–∏—Ä–∫—É –Ω–∞ air b&b –Ω–∞ 7 –¥–Ω–µ–π
    –ü—Ä–æ—Å—Ç–æ –ø–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ —ç—Ç–æ—Ç –∫–∞–º–∏–Ω!!!!
    –Ø —Å–ª—ã—à–∞–ª, —á—Ç–æ –≤—Å—é –≥–æ–ª–∞–Ω–¥–∏—é –º–æ–∂–Ω–æ –æ–±—å–µ–∑–¥–∏—Ç—å –∑–∞ –Ω–µ–¥–µ–ª—é, –∏ –¥–ª—è —ç—Ç–æ–≥–æ —è —Å–Ω–∏–º—É –ø—Ä–æ—Å—Ç–µ–Ω—å–∫—É—é –º–∞—à–∏–Ω–∫—É \(netherlandsCountryCar.model) –Ω–∞ –Ω–µ–¥–µ–ª—é –∑–∞ \(netherlandsCountryCar.carPrice * 7)$ –Ω–∞ 7 –¥–Ω–µ–π
    –£ –Ω–∞—Å –±—É–¥–µ—Ç –≤—Ä–µ–º—è —Å–¥–µ–ª–∞—Ç—å –µ—â–µ –ø–∞—Ä—É —Ñ–æ—Ç–æ—á–µ–∫
    """
}
apartaments.append((netherlands["Netherlands"]?["Apartaments"] ?? 0) * 7)
picturesTaken.append(6)
tickets.append(netherlands["Netherlands"]?["Tickets"] ?? 0)
vehicle.append(netherlandsCountryCar.carPrice * 7)

tellStory(country: france) { country in
    """
    —Å–∞–º–æ–µ –≤—Ä–µ–º—è –ø–æ—Å–µ—Ç–∏—Ç—å –≤—Ç–æ—Ä—É—é –Ω–∞ —Å–ø–∏—Å–∫–µ —Å—Ç—Ä–∞–Ω—É - \(country.keys.first ?? "No info")
    –±–∏–ª–µ—Ç—ã —É–¥–∞–ª–æ—Å—å —Å–ª–æ–≤–∏—Ç—å –Ω–∞ —Å–∫–∏–¥–∫–µ –∑–∞ \(country["France"]?["Tickets"] ?? 0)$
    """
}
tickets.append(france["France"]?["Tickets"] ?? 0)

if let car = franceCountryCar {
    print("–Ø –±—É–¥—É –ø—Ä–∏–º–µ—Ä–Ω–æ 2 –¥–Ω—è, –ø–æ—ç—Ç–æ–º—É —Å–Ω—è–ª —É–∫—Ä–æ–º–Ω–æ–µ –º–µ—Å—Ç–µ—á–∫–æ —É –ï–π—Ñ–µ–ª–µ–≤–æ–π –ë–∞—à–Ω–∏ —Å –º–∞—à–∏–Ω–æ–π \(car.model) \(car.model == "Ford Mustang" ? "–±–µ–∑ –∫—Ä—ã—à–∏" : "")")
    
    totalApartaments += france["France"]?["Apartaments"] ?? 0
    totalVehicleExpanses += (car.carPrice * 2)
} else {
    print("–Ø –±—É–¥—É –ø—Ä–∏–º–µ—Ä–Ω–æ 2 –¥–Ω—è, –ø–æ—ç—Ç–æ–º—É —Å–Ω—è–ª —É–∫—Ä–æ–º–Ω–æ–µ –º–µ—Å—Ç–µ—á–∫–æ —É –ï–π—Ñ–µ–ª–µ–≤–æ–π –ë–∞—à–Ω–∏, –¥–µ—Ä–∂–∏ –ø–∞—Ä—É —Ñ–æ—Ç–æ–∫)")
    totalApartaments += france["France"]?["Apartaments"] ?? 0
    totalPictureTaken += 2
}
tellStory(country: france) { country in
    "–ó–¥–µ—Å—å –±–µ–∑ –∫—Ä—É–∞—Å–∞–Ω–∞ \(croissant) –Ω–∏–∫–∞–∫, –∫—É–ø–∏–º –∏ –µ–¥—É –≤ –ê–µ—Ä–æ–ø–æ—Ä—Ç"
}
otherExpenses.append(Double(croissantPrice))
picturesTaken.append(1)

tellStory(country: newYork) { country in
    """
    –ò –≤–æ—Ç –¥–æ–ª–≥–æ–∂–¥–∞–Ω—ã–π \(country.keys.first ?? "No info")!, –∏ –∑–¥–µ—Å—å —è –±–µ—Ä—É —Å–∞–º—É—é –≤–∏–¥–æ–≤—É—é –∫–≤–∞—Ä—Ç–∏—Ä–∫—É –Ω–∞ air b&b –∑–∞ —Ü–µ–ª—ã—Ö \(country["NewYork"]?["Apartaments"] ?? 0)$ –≤ —Å—É—Ç–∫–∏!
    –í–æ—Å–ø–æ–ª—å–∑—É—é—Å—å –ø–ª–∞—Ç–Ω—ã–º –±–∞—Ä–æ–º –∏ –≤–æ–∑—å–º—É –∫–æ–ª—É —Å —à–æ–∫–æ–ª–∞–¥–∫–æ–π
    –ë–ª–∞–≥–æ —è –∑–¥–µ—Å—å –±—É–¥—É 1 –¥–µ–Ω—å, –ø–æ—ç—Ç–æ–º—É –æ—Ç–¥–æ—Ö–Ω—É—Ç—å —Ä–µ—à–∏–ª –Ω–∞ –ø–æ–ª–Ω—É—é!
    """
}
apartaments.append(newYork["NewYork"]?["Apartaments"] ?? 0)
picturesTaken.append(2)
tickets.append(newYork["NewYork"]?["Tickets"] ?? 0)
otherExpenses.append((chocolateBar + Double(cola)))

if let car = newYorkCountryCar {
    print("–ê –≤–æ—Ç –∏ —Ç–∞–∫—Å–∏ \(car.model)\(taxi)!")
    vehicle.append(car.carPrice)
} else {
    print("–ó–¥–µ—Å—å —Ç–∞–∫–∏–µ –ø—Ä–æ–±–∫–∏ \(taxi), —á—Ç–æ –ª—É—á—à–µ —è –≤–æ—Å–ø–æ–ª—å–∑—É—é –º–µ—Ç—Ä–æ")
    vehicle.append(subwayNyc)
    picturesTaken.append(1)
}
tellStory(country: newYork) { country in
    "–°—Ä–∞–∑—É –ø–æ—Å–ª–µ \(country.keys.first ?? "No info")'a"
}
tellStory(country: japan) { country in
    """
    —è —Å—Ä–∞–∑—É –∂–µ –Ω–∞–ø—Ä–∞–≤–ª—é—Å—å –≤ \(japan.keys.first ?? "No info")
    –î–∞–π –ë–æ–≥ –º–Ω–µ –æ–¥–æ–±—Ä—è—Ç –≤–∏–∑—É!")
    –ö–≤–∞—Ä—Ç–∏—Ä—É –≤–æ–∑—å–º—É –Ω–∞ 3 –¥–Ω—è, –±–µ–∑ –∞–≤—Ç–æ
    """
}
tickets.append(japan["Japan"]?["Tickets"] ?? 0)
apartaments.append((japan["Japan"]?["Apartaments"] ?? 0) * 3)
picturesTaken.append(1)

tellStory(country: northKorea) { country in
        """
        –í –∫—Ä–∞–π–Ω–µ–º —Å–ª—É—á–∞–µ —è –Ω–∞–ø—Ä–∞–≤–ª—é—Å—å –≤ \(country.keys.first ?? "No info")
        –∏ –∫—Ä–∞–π–Ω–∏–π –¥–µ–Ω—å —è –ø—Ä–æ–≤–µ–¥—É –∑–¥–µ—Å—å
        """
}

tickets.append(northKorea["northKorea"]?["Tickets"] ?? 0)
apartaments.append(northKorea["northKorea"]?["Apartaments"] ?? 0)
totalTickets = tickets.reduce(0, { $0 + $1 })
totalApartaments = apartaments.reduce(0, { $0 + $1 })
totalPictureTaken = picturesTaken.reduce(0, { $0 + $1 })
totalOther = otherExpenses.reduce(0, { $0 + $1 })
totalVehicleExpanses = vehicle.reduce(0, { $0 + $1 })
totalTicketsWithEmojie = tickets.map { String($0) + "$" + " \(plane)"}

summary = sumUpExpenses(tickets: totalTickets, apartaments: totalApartaments, vehicle: totalVehicleExpanses, other: totalOther)

finalExpensesMessage(totalTickets: totalTickets, totalApartaments: totalApartaments, totalPictures: totalPictureTaken, totalOther: totalOther, totalVehicle: totalVehicleExpanses)

// –ó–∞–¥–∞–Ω–∏–µ —Å–æ ‚≠êÔ∏è
func tellStory(country: [String : [String : Int]], message: ([String: [String: Int]]) -> (String)) {
    let story = message(country)
    print(story)
}

// Functions
func createCountryDictionarie(countryName: String, ticketsPrice: Int, apartamentsPrice: Int) -> [String: [String: Int]] {
    let newDictionarie = [countryName: ["Tickets": ticketsPrice, "Apartaments": apartamentsPrice]]
    
    return newDictionarie
}

func sumUpExpenses(tickets: Int, apartaments: Int, vehicle: Int, other: Double) -> Double {
    return Double(tickets + apartaments + vehicle) + other
}

func finalExpensesMessage(totalTickets: Int, totalApartaments: Int, totalPictures: Int, totalOther: Double, totalVehicle: Int) {
    print("""
          –ö–∞–∫ –∏—Ç–æ–≥ –≤—Å—ë –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –º–Ω–µ –æ–±–æ—à–ª–æ—Å—å –≤ \(summary)$
          –ù–∞ –±–∏–ª–µ—Ç—ã —É –º–µ–Ω—å —É—à–ª–æ –ø–æ—Ä—è–¥–∫–∞ \(totalTickets)$
          –í —Ç–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ - \(totalTicketsWithEmojie.sorted(by: { $0 < $1 }).joined(separator: ", "))
          –ù–∞ —Å—ä—ë–º –∂–∏–ª—å—è –µ—â—ë + \(totalApartaments)$
          –ê –≤–æ—Ç –Ω–∞ –∞—Ä–µ–Ω–¥—É –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π - \(totalVehicle)$
          –ú–µ–Ω—å—à–µ –≤—Å–µ–≥–æ –∑–∞–Ω—è–ª–∏ —Ä–∞—Å—Å—Ç—Ä–∞—Ç—ã –Ω–∞ —Å–ø–æ–Ω—Ç–∞–Ω–Ω—ã–µ —Å–Ω—ç–∫–∏ - \(totalOther)$
          –∏ —è —É—Å–ø–µ–ª —Å–¥–µ–ª–∞—Ç—å \(totalPictures) —Ñ–æ—Ç–æ–∫!!
          """)
}
